import{r as o,a as ge,j as pe,u as Ne,m as me,l as a,k as i,J as m}from"./main-56e33d04.js";import{z as n,u as ye,C as _e,t as ve}from"./zod-33111011.js";import{U as ke}from"./index-963277ed.js";/* empty css              */const je=n.object({name:n.string().min(1,"Name is required"),mobile:n.string().min(1,"Mobile is required"),pan:n.string().min(1,"Pan is required").regex(/^[a-zA-Z]{5}([0-9]){4}([a-zA-Z0-9]){1}?$/),address_1:n.string().min(1,"Address 1 is required"),address_2:n.string().min(1,"Address 2 is required"),city:n.string().min(1,"City is required"),state:n.string().min(1,"State is required"),pincode:n.string().min(1,"Pincode is required"),bank_name:n.string().min(1,"Bank Name is required"),account_name:n.string().min(1,"Account Name is required"),account_no:n.string().min(1,"Account No is required"),ifsc:n.string().min(1,"Ifsc is required"),business_name:n.string().min(1,"Business Name is required"),gstin:n.string().min(1,"Gstin is required")}),Ee=()=>{var h;const s=JSON.parse(localStorage.getItem("user"));console.log(s),o.useState({});const[ue,u]=o.useState(null);ge();const f=pe(),[c,fe]=o.useState({});Ne(l=>l.themeConfig.theme==="dark"||l.themeConfig.isDarkMode);const{register:r,handleSubmit:he,setValue:d,control:be,formState:{errors:t}}=ye({resolver:ve(je)});o.useEffect(()=>{var l;me.get(`/api/profiles/${(l=s==null?void 0:s.profile)==null?void 0:l.id}`,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{var b,x,g,p,N,y,_,v,k,j,w,C,F,S,A,E,q,P,B,D,z,I,M,U,G,J,T,$,R,Z,H,O,V,K,L,Q,W,X,Y,ee,ae,te,le,ie,de,ne,ce,re,se,oe;fe((x=(b=e==null?void 0:e.data)==null?void 0:b.data)==null?void 0:x.profile),d("name",(N=(p=(g=e==null?void 0:e.data)==null?void 0:g.data)==null?void 0:p.profile)==null?void 0:N.name),d("mobile",(v=(_=(y=e==null?void 0:e.data)==null?void 0:y.data)==null?void 0:_.profile)==null?void 0:v.mobile),console.log("THis is mobile      ",(w=(j=(k=e==null?void 0:e.data)==null?void 0:k.data)==null?void 0:j.profile)==null?void 0:w.mobile),u((S=(F=(C=e==null?void 0:e.data)==null?void 0:C.data)==null?void 0:F.profile)==null?void 0:S.mobile),d("pan",(q=(E=(A=e==null?void 0:e.data)==null?void 0:A.data)==null?void 0:E.profile)==null?void 0:q.pan),d("address_1",(D=(B=(P=e==null?void 0:e.data)==null?void 0:P.data)==null?void 0:B.profile)==null?void 0:D.address_1),d("address_2",(M=(I=(z=e==null?void 0:e.data)==null?void 0:z.data)==null?void 0:I.profile)==null?void 0:M.address_2),d("city",(J=(G=(U=e==null?void 0:e.data)==null?void 0:U.data)==null?void 0:G.profile)==null?void 0:J.city),d("state",(R=($=(T=e==null?void 0:e.data)==null?void 0:T.data)==null?void 0:$.profile)==null?void 0:R.state),d("pincode",(O=(H=(Z=e==null?void 0:e.data)==null?void 0:Z.data)==null?void 0:H.profile)==null?void 0:O.pincode),d("bank_name",(L=(K=(V=e==null?void 0:e.data)==null?void 0:V.data)==null?void 0:K.profile)==null?void 0:L.bank_name),d("account_name",(X=(W=(Q=e==null?void 0:e.data)==null?void 0:Q.data)==null?void 0:W.profile)==null?void 0:X.account_name),d("account_no",(ae=(ee=(Y=e==null?void 0:e.data)==null?void 0:Y.data)==null?void 0:ee.profile)==null?void 0:ae.account_no),d("ifsc",(ie=(le=(te=e==null?void 0:e.data)==null?void 0:te.data)==null?void 0:le.profile)==null?void 0:ie.ifsc),d("business_name",(ce=(ne=(de=e==null?void 0:e.data)==null?void 0:de.data)==null?void 0:ne.profile)==null?void 0:ce.business_name),d("gstin",(oe=(se=(re=e==null?void 0:e.data)==null?void 0:re.data)==null?void 0:se.profile)==null?void 0:oe.gstin)})},[(h=s==null?void 0:s.profile)==null?void 0:h.id]);const xe=async l=>{try{const e=await me.put(`/api/profiles/${s.profile.id}`,{...l},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}});console.log(e),m.success("Registration successful"),f("/")}catch(e){console.log(e),e.response.data.pan&&m.error(e.response.data.data.pan[0]),e.response.data.mobile&&m.error(e.response.data.data.mobile[0])}};return a("div",{className:"max-h-[100vh] flex justify-center items-center mb-[70px] p-2",children:i("div",{className:" h-full w-[90%] mt-[150px] ",children:[a("h2",{className:"font-bold text-2xl ",children:"Update Profile"}),a("p",{className:"mb-7",children:"Enter your details to Update"}),i("form",{className:" grid grid-cols-2  justify-items-center mb-[50px] bg-slate-50 rounded-md p-6 ",onSubmit:he(l=>{l.mobile=l.mobile.replace(" ",""),l.mobile=l.mobile.replace("-",""),console.log(l),xe(l),f("/dashboard")}),children:[i("div",{style:{backgroundColor:"#FFFFFF"},className:" w-full flex flex-col justify-center col-span-2 max-h-[490px]  ",children:[a("div",{className:" flex flex-col justify-center",children:a("label",{htmlFor:"Personal",className:"font-bold text-[20px] mb-6",children:"Personal Details"})}),i("div",{className:"w-full grid grid-cols-2 gap-4 justify-items-center mb-[50px] col-span-2",children:[i("div",{className:"w-full flex flex-col justify-end ",children:[a("label",{htmlFor:"name",children:"Name"}),a("input",{id:"name",type:"text",...r("name"),className:"form-input self-center",placeholder:"Enter Name"}),t.name&&a("span",{className:"text-red-600",children:t.name.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"mobile",children:"Mobile"}),a(ke,{value:ue||"",onChange:l=>{u(l),d("mobile",l)},inputStyle:{width:"100%",borderRadius:"5px",padding:"10px",fontSize:"16px",color:"#000"},defaultCountry:"in",placeholder:"Enter Mobile"}),t.mobile&&a("span",{className:"text-red-600",children:t.mobile.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"pan",children:"Pan"}),a(_e,{name:"pan",control:be,render:({field:l})=>{var e;return a("input",{id:"pan",placeholder:"Enter Pan number",...l,value:(e=l.value)==null?void 0:e.toUpperCase(),className:t.pan?"border-red-500 form-input":"form-input"})}})," ",t.pan&&a("span",{className:"text-red-600",children:t.pan.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"address_1",children:"Address 1"}),a("input",{id:"address_1",type:"text",...r("address_1"),className:"form-input",placeholder:"Enter Address 1"}),t.address_1&&a("span",{className:"text-red-600",children:t.address_1.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"address_2",children:"Address 2"}),a("input",{id:"address_2",type:"text",...r("address_2"),className:"form-input",placeholder:"Enter Address 2"}),t.address_2&&a("span",{className:"text-red-600",children:t.address_2.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"city",children:"City"}),a("input",{id:"city",type:"text",...r("city"),className:"form-input",placeholder:"Enter City"}),t.city&&a("span",{className:"text-red-600",children:t.city.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"state",children:"State"}),a("input",{id:"state",type:"text",...r("state"),className:"form-input",placeholder:"Enter State"}),t.state&&a("span",{className:"text-red-600",children:t.state.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"pincode",children:"Pincode"}),a("input",{id:"pincode",type:"text",...r("pincode"),className:"form-input",placeholder:"Enter Pincode"}),t.pincode&&a("span",{className:"text-red-600",children:t.pincode.message})]})]})]}),i("div",{className:" w-full flex flex-col justify-center col-span-2",children:[a("div",{className:"w-full flex flex-col justify-center",children:a("label",{htmlFor:"Bank",className:"font-bold text-[20px] mb-6",children:"Bank Details"})}),i("div",{className:"w-full grid grid-cols-2 gap-4 justify-items-center mb-[50px]  col-span-2",children:[i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"bank_name",children:"Bank Name"}),a("input",{style:c.bank_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},type:"text",disabled:c.bank_verified===!0,id:"bank_name",...r("bank_name"),className:"form-input",placeholder:"Enter Bank Name"}),t.bank_name&&a("span",{className:"text-red-600",children:t.bank_name.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"account_name",children:"Account Name"}),a("input",{style:c.bank_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},disabled:c.bank_verified===!0,id:"account_name",type:"text",...r("account_name"),className:"form-input",placeholder:"Enter Account Name"}),t.account_name&&a("span",{className:"text-red-600",children:t.account_name.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"account_no",children:"Account No"}),a("input",{style:c.bank_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},disabled:c.bank_verified===!0,id:"account_no",type:"text",...r("account_no"),className:"form-input",placeholder:"Enter Account No"}),t.account_no&&a("span",{className:"text-red-600",children:t.account_no.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"ifsc",children:"Ifsc"}),a("input",{style:c.bank_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},disabled:c.bank_verified===!0,id:"ifsc",type:"text",...r("ifsc"),className:"form-input",placeholder:"Enter Ifsc"}),t.ifsc&&a("span",{className:"text-red-600",children:t.ifsc.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"business_name",children:"Business Name"}),a("input",{style:c.gstin_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},disabled:c.gstin_verified===!0,id:"business_name",type:"text",...r("business_name"),className:"form-input",placeholder:"Enter Business Name"}),t.business_name&&a("span",{className:"text-red-600",children:t.business_name.message})]}),i("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"gstin",children:"Gstin"}),a("input",{style:c.gstin_verified===!0?{backgroundColor:"#848482"}:{backgroundColor:"white"},disabled:c.gstin_verified===!0,id:"gstin",type:"text",...r("gstin"),className:"form-input",placeholder:"Enter Gstin"}),t.gstin&&a("span",{className:"text-red-600",children:t.gstin.message})]})]})]}),a("div",{className:"w-full flex flex-col justify-end col-span-2",children:a("button",{type:"submit",className:"btn btn-primary  self-end",children:"Update Profile"})})]})]})})};export{Ee as default};

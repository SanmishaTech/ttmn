import{r,a as we,j as Fe,u as pe,o as Ee,m as Ne,l as a,k as l,J as m}from"./main-56e33d04.js";import{z as c,u as Se,C as Ae,t as Ce}from"./zod-33111011.js";import{U as qe}from"./index-963277ed.js";/* empty css              */const Pe=c.object({name:c.string().min(1,"Name is required"),mobile:c.string().min(1,"Mobile is required"),pan:c.string().min(1,"Pan is required").regex(/^[a-zA-Z]{5}([0-9]){4}([a-zA-Z0-9]){1}?$/),address_1:c.string().min(1,"Address 1 is required"),address_2:c.string().min(1,"Address 2 is required"),city:c.string().min(1,"City is required"),state:c.string().min(1,"State is required"),pincode:c.string().min(1,"Pincode is required"),bank_name:c.string().min(1,"Bank Name is required"),account_name:c.string().min(1,"Account Name is required"),account_no:c.string().min(1,"Account No is required"),ifsc:c.string().min(1,"Ifsc is required"),business_name:c.string().min(1,"Business Name is required"),gstin:c.string().min(1,"Gstin is required"),gstin_verified:c.boolean().optional(),bank_verified:c.boolean().optional(),pan_verified:c.boolean().optional()}),Me=()=>{const ge=JSON.parse(localStorage.getItem("user"));console.log(ge),r.useState({});const[_e,o]=r.useState(null);we();const f=Fe(),[Be,ye]=r.useState({});pe(e=>e.themeConfig),pe(e=>e.themeConfig.theme==="dark"||e.themeConfig.isDarkMode);const{id:s}=Ee(),{register:n,handleSubmit:ve,setValue:i,control:je,formState:{errors:t}}=Se({resolver:Ce(Pe)});r.useEffect(()=>{Ne.get(`/api/profiles/${s}`,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{var d,u,h,x,b,p,N,g,_,y,v,j,k,w,F,E,S,A,C,q,P,B,D,U,z,I,G,M,J,T,$,R,Z,H,O,V,K,L,Q,W,X,Y,ee,ae,te,le,ie,ce,ne,de,re,se,me,oe,fe,ue,he,xe,be;ye((u=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:u.profile),i("name",(b=(x=(h=e==null?void 0:e.data)==null?void 0:h.data)==null?void 0:x.profile)==null?void 0:b.name),i("mobile",(g=(N=(p=e==null?void 0:e.data)==null?void 0:p.data)==null?void 0:N.profile)==null?void 0:g.mobile),console.log("THis is mobile      ",(v=(y=(_=e==null?void 0:e.data)==null?void 0:_.data)==null?void 0:y.profile)==null?void 0:v.mobile),o((w=(k=(j=e==null?void 0:e.data)==null?void 0:j.data)==null?void 0:k.profile)==null?void 0:w.mobile),i("pan",(S=(E=(F=e==null?void 0:e.data)==null?void 0:F.data)==null?void 0:E.profile)==null?void 0:S.pan),i("address_1",(q=(C=(A=e==null?void 0:e.data)==null?void 0:A.data)==null?void 0:C.profile)==null?void 0:q.address_1),i("address_2",(D=(B=(P=e==null?void 0:e.data)==null?void 0:P.data)==null?void 0:B.profile)==null?void 0:D.address_2),i("city",(I=(z=(U=e==null?void 0:e.data)==null?void 0:U.data)==null?void 0:z.profile)==null?void 0:I.city),i("state",(J=(M=(G=e==null?void 0:e.data)==null?void 0:G.data)==null?void 0:M.profile)==null?void 0:J.state),i("pincode",(R=($=(T=e==null?void 0:e.data)==null?void 0:T.data)==null?void 0:$.profile)==null?void 0:R.pincode),i("bank_name",(O=(H=(Z=e==null?void 0:e.data)==null?void 0:Z.data)==null?void 0:H.profile)==null?void 0:O.bank_name),i("account_name",(L=(K=(V=e==null?void 0:e.data)==null?void 0:V.data)==null?void 0:K.profile)==null?void 0:L.account_name),i("account_no",(X=(W=(Q=e==null?void 0:e.data)==null?void 0:Q.data)==null?void 0:W.profile)==null?void 0:X.account_no),i("ifsc",(ae=(ee=(Y=e==null?void 0:e.data)==null?void 0:Y.data)==null?void 0:ee.profile)==null?void 0:ae.ifsc),i("business_name",(ie=(le=(te=e==null?void 0:e.data)==null?void 0:te.data)==null?void 0:le.profile)==null?void 0:ie.business_name),i("gstin",(de=(ne=(ce=e==null?void 0:e.data)==null?void 0:ce.data)==null?void 0:ne.profile)==null?void 0:de.gstin),i("gstin_verified",(me=(se=(re=e==null?void 0:e.data)==null?void 0:re.data)==null?void 0:se.profile)==null?void 0:me.gstin_verified),i("bank_verified",(ue=(fe=(oe=e==null?void 0:e.data)==null?void 0:oe.data)==null?void 0:fe.profile)==null?void 0:ue.bank_verified),i("pan_verified",(be=(xe=(he=e==null?void 0:e.data)==null?void 0:he.data)==null?void 0:xe.profile)==null?void 0:be.pan_verified)})},[s]);const ke=async e=>{try{const d=await Ne.put(`/api/profiles/${s}`,{...e},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}});console.log(d),m.success("Registration successful"),f("/")}catch(d){console.log(d),d.response.data.pan&&m.error(d.response.data.data.pan[0]),d.response.data.mobile&&m.error(d.response.data.data.mobile[0])}};return a("div",{className:"max-h-[100vh] flex justify-center items-center mb-[70px]",children:l("div",{className:" h-full w-[90%] mt-[150px] ",children:[a("h2",{className:"font-bold text-2xl mb-3",children:"Update Profile"}),a("p",{className:"mb-7",children:"Enter your details to Update"}),l("form",{className:" grid grid-cols-2  justify-items-center mb-[50px] bg-slate-50 rounded-md p-6 ",onSubmit:ve(e=>{e.mobile=e.mobile.replace(" ",""),e.mobile=e.mobile.replace("-",""),console.log(e),ke(e),f("/dashboard")}),children:[l("div",{style:{backgroundColor:"#FFFFFF"},className:" w-full flex flex-col justify-center col-span-2 max-h-[490px]  ",children:[a("div",{className:" flex flex-col justify-center mt-[20px]",children:a("label",{htmlFor:"Personal",className:"font-bold text-[20px] mb-6",children:"Personal Details"})}),l("div",{className:"w-full grid grid-cols-2 gap-4 justify-items-center mb-[50px] col-span-2",children:[l("div",{className:"w-full flex flex-col justify-end ",children:[a("label",{htmlFor:"name",children:"Name"}),a("input",{id:"name",type:"text",...n("name"),className:"form-input self-center",placeholder:"Enter Name"}),t.name&&a("span",{className:"text-red-600",children:t.name.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"mobile",children:"Mobile"}),a(qe,{value:_e||"",onChange:e=>{o(e),i("mobile",e)},inputStyle:{width:"100%",borderRadius:"5px",padding:"10px",fontSize:"16px",color:"#000"},defaultCountry:"in",placeholder:"Enter Mobile"}),t.mobile&&a("span",{className:"text-red-600",children:t.mobile.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[l("div",{className:"w-full flex  gap-2  space-start flex-col items-start",children:[a("label",{className:" text-sm font-semibold",htmlFor:"pan",children:"Pan"}),a(Ae,{name:"pan",control:je,render:({field:e})=>{var d;return a("input",{id:"pan",placeholder:"Enter Pan number",...e,value:(d=e.value)==null?void 0:d.toUpperCase(),className:t.pan?"border-red-500 form-input":"form-input"})}})," "]}),t.pan&&a("span",{className:"text-red-600",children:t.pan.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"address_1",children:"Address 1"}),a("input",{id:"address_1",type:"text",...n("address_1"),className:"form-input",placeholder:"Enter Address 1"}),t.address_1&&a("span",{className:"text-red-600",children:t.address_1.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"address_2",children:"Address 2"}),a("input",{id:"address_2",type:"text",...n("address_2"),className:"form-input",placeholder:"Enter Address 2"}),t.address_2&&a("span",{className:"text-red-600",children:t.address_2.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"city",children:"City"}),a("input",{id:"city",type:"text",...n("city"),className:"form-input",placeholder:"Enter City"}),t.city&&a("span",{className:"text-red-600",children:t.city.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"state",children:"State"}),a("input",{id:"state",type:"text",...n("state"),className:"form-input",placeholder:"Enter State"}),t.state&&a("span",{className:"text-red-600",children:t.state.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"pincode",children:"Pincode"}),a("input",{id:"pincode",type:"text",...n("pincode"),className:"form-input",placeholder:"Enter Pincode"}),t.pincode&&a("span",{className:"text-red-600",children:t.pincode.message})]})]})]}),l("div",{className:" w-full flex flex-col justify-center col-span-2",children:[a("div",{className:"w-full flex flex-col justify-center",children:l("div",{className:"w-full flex items-center gap-2  space-between",children:[a("label",{htmlFor:"Bank",className:"font-bold text-[20px] mb-6",children:"Bank Details"}),a("input",{type:"checkbox",name:"bank_verified",id:"bank_verified",className:"mb-6 rounded-md",...n("bank_verified"),placeholder:"Enter Bank Details"})]})}),l("div",{className:"w-full grid grid-cols-2 gap-4 justify-items-center mb-[50px]  col-span-2",children:[l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"bank_name",children:"Bank Name"}),a("input",{id:"bank_name",type:"text",...n("bank_name"),className:"form-input",placeholder:"Enter Bank Name"}),t.bank_name&&a("span",{className:"text-red-600",children:t.bank_name.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"account_name",children:"Account Name"}),a("input",{id:"account_name",type:"text",...n("account_name"),className:"form-input",placeholder:"Enter Account Name"}),t.account_name&&a("span",{className:"text-red-600",children:t.account_name.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"account_no",children:"Account No"}),a("input",{id:"account_no",type:"text",...n("account_no"),className:"form-input",placeholder:"Enter Account No"}),t.account_no&&a("span",{className:"text-red-600",children:t.account_no.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"ifsc",children:"Ifsc"}),a("input",{id:"ifsc",type:"text",...n("ifsc"),className:"form-input",placeholder:"Enter Ifsc"}),t.ifsc&&a("span",{className:"text-red-600",children:t.ifsc.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[a("label",{htmlFor:"business_name",children:"Business Name"}),a("input",{id:"business_name",type:"text",...n("business_name"),className:"form-input",placeholder:"Enter Business Name"}),t.business_name&&a("span",{className:"text-red-600",children:t.business_name.message})]}),l("div",{className:"w-full flex flex-col justify-center",children:[l("div",{className:"flex items-center gap-2",children:[a("label",{htmlFor:"gstin",children:"Gstin"}),a("input",{id:"gstin",type:"checkbox",...n("gstin_verified"),className:"mb-1",placeholder:"Enter Gstin"})]}),a("input",{id:"gstin",type:"text",...n("gstin"),className:"form-input",placeholder:"Enter Gstin"}),t.gstin&&a("span",{className:"text-red-600",children:t.gstin.message})]})]})]}),a("div",{className:"w-full flex flex-col justify-end col-span-2",children:a("button",{type:"submit",className:"btn btn-primary  self-end",children:"Update Profile"})})]})]})})};export{Me as default};
